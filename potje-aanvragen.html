<!DOCTYPE html>
<html lang="nl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lief & Leed Potje Aanvragen | Straatambassadeurs Vathorst & Hooglanderveen</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="theme-color" content="#1a2744">
    <meta name="description" content="Vraag het Lief & Leed potje aan bij de straatambassadeurs Vathorst & Hooglanderveen. Buurtbudget van Gemeente Amersfoort voor lief en leed in de buurt.">
    <meta property="og:title" content="Lief & Leed Potje Aanvragen - Straatambassadeurs">
    <meta property="og:description" content="Buurtbudget aanvragen voor lief en leed in Vathorst of Hooglanderveen. Gemeente Amersfoort buurtbudget via de straatambassadeurs.">
    <meta property="og:url" content="https://straatambassadeurs.nl/potje-aanvragen.html">
    <meta property="og:image" content="https://straatambassadeurs.nl/logo.jpg">
    <link rel="canonical" href="https://straatambassadeurs.nl/potje-aanvragen.html">
    <link rel="icon" href="favicon.png">
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="logo">
                    <div>
                        <div class="header-title">Lief & Leed Potje</div>
                        <div class="header-subtitle">‚Ç¨100 voor jouw straat</div>
                    </div>
                </div>
                <span class="under-construction">üöß Website in opbouw</span>
                <button class="nav-toggle" onclick="document.querySelector('nav').classList.toggle('active')" aria-label="Menu">‚ò∞</button>
                <nav>
                    <a href="index.html">Home</a>
                    <a href="nieuws.html">Nieuws</a>
                    <a href="kaart.html">Kaart</a>
                    <a href="over-sa.html">Info voor ambassadeurs</a>
                    <a href="over-kerngroep.html">Over de kerngroep</a>
                    <a href="contact.html">Contact</a>
                    <a href="admin.html">Beheer</a>
                </nav>
            </div>
        </header>

        <main>
            <div class="form-card">
                <h2 class="form-title">üß° Lief & Leed Potje Aanvragen</h2>
                
                <div class="info-box" style="margin-bottom: 20px;">
                    <span class="info-box-icon">‚ÑπÔ∏è</span>
                    <div>
                        Dit formulier is alleen voor <strong>geregistreerde straatambassadeurs</strong>. 
                        Nog geen ambassadeur? <a href="aanmelden.html" style="color: var(--street-blue); font-weight: 600;">Meld je eerst aan</a>.
                    </div>
                </div>
                
                <form id="potje-form">
                    <!-- 1. Jouw gegevens -->
                    <div class="form-section">
                        <h4>Jouw gegevens</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="naam">Je naam <span class="required">*</span></label>
                                <input type="text" id="naam" name="naam" required placeholder="Je volledige naam">
                            </div>
                            <div class="form-group">
                                <label for="straat">Straat <span class="required">*</span></label>
                                <select id="straat" name="straat" required>
                                    <option value="">-- Kies je straat --</option>
                                    <option value="Ameliapolder">Ameliapolder</option>
                                    <option value="Archemerberg">Archemerberg</option>
                                    <option value="Beemster">Beemster</option>
                                    <option value="Boterberg">Boterberg</option>
                                    <option value="Braamberg">Braamberg</option>
                                    <option value="De Gavel">De Gavel</option>
                                    <option value="Dirk van Weelaan">Dirk van Weelaan</option>
                                    <option value="Durgerdamhaven">Durgerdamhaven</option>
                                    <option value="Eilandspolder">Eilandspolder</option>
                                    <option value="Emminkhuizerberg">Emminkhuizerberg</option>
                                    <option value="Eschberg">Eschberg</option>
                                    <option value="Geulemerberg">Geulemerberg</option>
                                    <option value="Heideweg">Heideweg</option>
                                    <option value="Hoekveen">Hoekveen</option>
                                    <option value="Hofstede">Hofstede</option>
                                    <option value="Johannes van Rossumlaan">Johannes van Rossumlaan</option>
                                    <option value="Kolhornkade">Kolhornkade</option>
                                    <option value="Laakboulevard">Laakboulevard</option>
                                    <option value="Laan van Bovenduist">Laan van Bovenduist</option>
                                    <option value="Laaxumstraat">Laaxumstraat</option>
                                    <option value="Landweg">Landweg</option>
                                    <option value="Lauwersmeer">Lauwersmeer</option>
                                    <option value="Lofoten">Lofoten</option>
                                    <option value="Paulinapolder">Paulinapolder</option>
                                    <option value="Riesenberg">Riesenberg</option>
                                    <option value="Straat van Dover">Straat van Dover</option>
                                    <option value="Suzannepolder">Suzannepolder</option>
                                    <option value="Tankenberg">Tankenberg</option>
                                    <option value="Vijlenerberg">Vijlenerberg</option>
                                    <option value="Weteringkade">Weteringkade</option>
                                    <option value="Zeisum">Zeisum</option>
                                    <option value="Zijpenberg">Zijpenberg</option>
                                    <option value="Zwarte Zee">Zwarte Zee</option>
                                    <option value="Anders">Anders (vul hieronder in)</option>
                                </select>
                            </div>
                        </div>
                        
                        <div id="andere-straat-veld" class="form-group hidden">
                            <label for="andere-straat">Andere straat</label>
                            <input type="text" id="andere-straat" name="andere-straat" placeholder="Vul je straatnaam in">
                        </div>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="telefoon">Telefoonnummer <span class="required">*</span></label>
                                <input type="tel" id="telefoon" name="telefoon" required placeholder="06-12345678">
                            </div>
                            <div class="form-group">
                                <label for="email">E-mailadres</label>
                                <input type="email" id="email" name="email" placeholder="jouw@email.nl">
                                <span class="field-hint">Voor bevestiging van je aanvraag</span>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Eerder ontvangen -->
                    <div class="form-section">
                        <h4>Vorig potje</h4>
                        
                        <div class="form-group">
                            <label>Heb je al eerder een potje ontvangen? <span class="required">*</span></label>
                            <div class="radio-group">
                                <label class="radio-label">
                                    <input type="radio" name="eerder" value="nee" checked onchange="toggleEerderVelden()">
                                    <span>Nee, dit is mijn eerste</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="eerder" value="ja" onchange="toggleEerderVelden()">
                                    <span>Ja</span>
                                </label>
                            </div>
                        </div>
                        
                        <div id="eerder-velden" class="conditional-field hidden">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="eerder-maand">Maand</label>
                                    <select id="eerder-maand" name="eerder-maand">
                                        <option value="">Kies maand</option>
                                        <option value="1">Januari</option>
                                        <option value="2">Februari</option>
                                        <option value="3">Maart</option>
                                        <option value="4">April</option>
                                        <option value="5">Mei</option>
                                        <option value="6">Juni</option>
                                        <option value="7">Juli</option>
                                        <option value="8">Augustus</option>
                                        <option value="9">September</option>
                                        <option value="10">Oktober</option>
                                        <option value="11">November</option>
                                        <option value="12">December</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label for="eerder-jaar">Jaar</label>
                                    <select id="eerder-jaar" name="eerder-jaar">
                                        <option value="">Kies jaar</option>
                                        <option value="2026">2026</option>
                                        <option value="2025">2025</option>
                                        <option value="2024">2024</option>
                                        <option value="2023">2023</option>
                                    </select>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label for="vorig-gebruik">Waarvoor heb je het vorige potje kunnen gebruiken?</label>
                                <textarea id="vorig-gebruik" name="vorig-gebruik" rows="2" placeholder="Bijv. bloemen voor zieke buur, welkomstcadeau nieuwe bewoners..."></textarea>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Administratie -->
                    <div class="form-section">
                        <h4>Administratie</h4>
                        
                        <div class="form-group">
                            <label>Hoe wil je de administratie (bonnetjes) regelen? <span class="required">*</span></label>
                            <div class="radio-group vertical">
                                <label class="radio-label">
                                    <input type="radio" name="administratie" value="zelf" required>
                                    <span>Ik bewaar zelf de administratie (min. 3 jaar)</span>
                                </label>
                                <label class="radio-label">
                                    <input type="radio" name="administratie" value="kerngroep">
                                    <span>Ik lever de administratie aan bij de kerngroep</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- 4. Ervaring delen -->
                    <div class="form-section">
                        <h4>Jouw verhaal (optioneel)</h4>
                        
                        <div class="form-group">
                            <label for="ervaring">Wil je een mooie ervaring delen over jouw straat(ambassadeursschap)?</label>
                            <textarea id="ervaring" name="ervaring" rows="3" placeholder="Vertel iets leuks over je straat of een mooie ervaring als ambassadeur..."></textarea>
                            <span class="field-hint">Dit helpt ons bij het delen van succesverhalen</span>
                        </div>
                    </div>

                    <!-- 5. Doel nieuw potje -->
                    <div class="form-section">
                        <h4>Nieuwe aanvraag</h4>
                        
                        <div class="form-group">
                            <label for="doel">Omschrijf kort waarvoor je het potje wilt gebruiken <span class="required">*</span></label>
                            <textarea id="doel" name="doel" rows="3" required placeholder="Bijv. bloemetje voor zieke buurvrouw, welkomstpakket nieuwe bewoners, koffie-ochtend organiseren..."></textarea>
                            <span class="field-hint">Wees zo specifiek mogelijk</span>
                        </div>
                    </div>

                    <!-- 6. Betaalgegevens -->
                    <div class="form-section">
                        <h4>Betaalgegevens</h4>
                        
                        <div class="form-row">
                            <div class="form-group">
                                <label for="iban">IBAN Rekeningnummer <span class="required">*</span></label>
                                <input type="text" id="iban" name="iban" required placeholder="NL00 BANK 0000 0000 00" maxlength="22">
                            </div>
                            <div class="form-group">
                                <label for="tenaamstelling">Tenaamstelling <span class="required">*</span></label>
                                <input type="text" id="tenaamstelling" name="tenaamstelling" required placeholder="Naam rekeninghouder">
                            </div>
                        </div>
                    </div>

                    <!-- 7. Verklaring -->
                    <div class="form-section">
                        <div class="checkbox-card">
                            <label>
                                <input type="checkbox" id="verklaring" name="verklaring" required>
                                <span>
                                    Ik verklaar het potje uitsluitend te besteden aan lief & leed activiteiten voor mijn straat 
                                    binnen de gestelde normen van de 
                                    <a href="https://www.amersfoort.nl/subsidie-lief-en-leed" target="_blank">subsidieregeling</a> 
                                    en ben zelf verantwoordelijk voor het administreren van de uitgaven.
                                </span>
                            </label>
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-gold btn-full">
                            üß° Aanvraag indienen
                        </button>
                    </div>
                </form>
            </div>

            <div id="success-message" class="success-message hidden">
                <div class="success-icon">‚úÖ</div>
                <h3>Aanvraag ingediend!</h3>
                <p>
                    Dankjewel voor je inzet in de buurt! De kerngroep ontvangt je aanvraag 
                    en neemt deze in behandeling. Je ontvangt bericht wanneer de ‚Ç¨100 is overgemaakt.
                </p>
                <p style="margin-top: 8px; font-size: 0.8rem; color: var(--gray-500);">
                    Van de straat, voor de straat üß°
                </p>
                <button onclick="resetForm()" class="btn btn-secondary">Nieuwe aanvraag</button>
            </div>
        </main>

        <footer>
            <div class="footer-houses"></div>
            <div class="footer-title">Straatambassadeurs Vathorst & Hooglanderveen</div>
            <div class="footer-tagline">Van de straat, voor de straat üß°</div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="supabase-config.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            window.supabaseClient = window.supabase.createClient('https://knxdefuncbzzbrunhlxg.supabase.co', 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImtueGRlZnVuY2J6emJydW5obHhnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NzAwMjM0NzIsImV4cCI6MjA4NTU5OTQ3Mn0.QRQ0uxK65s_9EaVZkqpFMGOGCvpH5GKisHqg1ZZay3Y');
            
            // Form submit handler
            document.getElementById('potje-form').addEventListener('submit', handleSubmit);
            
            // Straat dropdown - show "andere straat" field if "Anders" selected
            document.getElementById('straat').addEventListener('change', (e) => {
                const andereVeld = document.getElementById('andere-straat-veld');
                if (e.target.value === 'Anders') {
                    andereVeld.classList.remove('hidden');
                    document.getElementById('andere-straat').required = true;
                } else {
                    andereVeld.classList.add('hidden');
                    document.getElementById('andere-straat').required = false;
                }
            });
        });
        
        function toggleEerderVelden() {
            const eerderJa = document.querySelector('input[name="eerder"][value="ja"]').checked;
            document.getElementById('eerder-velden').classList.toggle('hidden', !eerderJa);
        }
        
        async function handleSubmit(e) {
            e.preventDefault();
            
            const eerderJa = document.querySelector('input[name="eerder"][value="ja"]').checked;
            
            // Get straat value (use "andere-straat" if "Anders" selected)
            let straatValue = document.getElementById('straat').value;
            if (straatValue === 'Anders') {
                straatValue = document.getElementById('andere-straat').value;
            }
            
            const formData = {
                ambassadeur_naam: document.getElementById('naam').value,
                straat: straatValue,
                telefoon: document.getElementById('telefoon').value,
                email: document.getElementById('email').value || null,
                eerder_ontvangen: eerderJa,
                eerder_maand: eerderJa ? document.getElementById('eerder-maand').value : null,
                eerder_jaar: eerderJa ? document.getElementById('eerder-jaar').value : null,
                vorig_gebruik: document.getElementById('vorig-gebruik').value || null,
                administratie: document.querySelector('input[name="administratie"]:checked').value,
                ervaring: document.getElementById('ervaring').value || null,
                doel: document.getElementById('doel').value,
                iban: document.getElementById('iban').value.replace(/\s/g, ''),
                tenaamstelling: document.getElementById('tenaamstelling').value,
                verklaring_akkoord: document.getElementById('verklaring').checked,
                bedrag: 100,
                status: 'nieuw',
                created_at: new Date().toISOString()
            };
            
            try {
                if (window.supabaseClient) {
                    const { error } = await window.supabaseClient
                        .from('aanvragen')
                        .insert([formData]);
                    
                    if (error) throw error;
                    
                    await fetch('/.netlify/functions/notify', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ type: 'potje', data: formData })
                    }).catch(() => {});
                }
                
                document.getElementById('potje-form').classList.add('hidden');
                document.getElementById('success-message').classList.remove('hidden');
                
            } catch (error) {
                console.error('Error:', error);
                alert('Er ging iets mis. Probeer het opnieuw of neem contact op via WhatsApp.');
            }
        }
        
        function resetForm() {
            document.getElementById('potje-form').reset();
            document.getElementById('potje-form').classList.remove('hidden');
            document.getElementById('success-message').classList.add('hidden');
            document.getElementById('andere-straat-veld').classList.add('hidden');
            toggleEerderVelden();
        }
    </script>
</body>
</html>
